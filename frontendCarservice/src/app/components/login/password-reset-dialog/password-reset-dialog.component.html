<div class="col-xs-12">
  <a class="close" (click)="close()"></a>
</div>

<h2 mat-dialog-title>Reset password</h2>
<form
  [formGroup]="resetPasswordForm"
  (ngSubmit)="onSubmit()"
>
  <div class="row">
    <div class="column">
      <mat-form-field appearance="outline" style="max-width:150px!important">
        <mat-label>Password</mat-label>
        <input matInput [type]="hide ? 'password': 'text'" formControlName="password" #password
               [errorStateMatcher]="matcher"
               placeholder="Password">
        <mat-icon *ngIf="(resetPasswordForm.controls['password'].hasError('minlength') && !resetPasswordForm.controls['password'].hasError('required'))
             || (resetPasswordForm.controls['password'].hasError('required') && resetPasswordForm.controls['password'].touched)
             || (resetPasswordForm.controls['password'].hasError('required') && resetPasswordForm.controls['password'].dirty)
             || resetPasswordForm.controls['password'].hasError('strong')" matSuffix>error
        </mat-icon>
        <mat-icon *ngIf="resetPasswordForm.controls['password'].valid" matSuffix>check_circle</mat-icon>
      </mat-form-field>
      <mat-error
        *ngIf="resetPasswordForm.controls['password'].hasError('minlength') && !resetPasswordForm.controls['password'].hasError('required') || resetPasswordForm.controls['password'].hasError('strong')">
        Please enter a valid password
      </mat-error>
      <mat-error
        *ngIf="(resetPasswordForm.controls['password'].hasError('required') && resetPasswordForm.controls['password'].touched) || (resetPasswordForm.controls['password'].hasError('required') && resetPasswordForm.controls['password'].dirty)">
        Password is <strong>required</strong>
      </mat-error>
      <p></p>
    </div>

    <div class="column">
      <mat-form-field appearance="outline" style="max-width:150px!important">
        <mat-label>Confirm</mat-label>
        <input matInput [type]="hide ? 'password' : 'text'" formControlName="matchingPassword" #matchingPassword
               [errorStateMatcher]="CrossFieldErrorMatcher"
               placeholder="Matching password">
        <mat-icon *ngIf="(resetPasswordForm.controls['matchingPassword'].hasError('minlength'))
             || (resetPasswordForm.controls['matchingPassword'].hasError('required') && resetPasswordForm.controls['matchingPassword'].touched || resetPasswordForm.hasError('passwordDoNotMatch'))
             || (resetPasswordForm.controls['matchingPassword'].hasError('required') && resetPasswordForm.controls['matchingPassword'].dirty || resetPasswordForm.hasError('passwordDoNotMatch'))"
                  matSuffix>error
        </mat-icon>
        <mat-icon
          *ngIf="resetPasswordForm.controls['matchingPassword'].valid && !resetPasswordForm.hasError('passwordDoNotMatch')"
          matSuffix>check_circle
        </mat-icon>
      </mat-form-field>
      <mat-error
        *ngIf="resetPasswordForm.hasError('passwordDoNotMatch') && !resetPasswordForm.controls['matchingPassword'].hasError('required')">
        Passwords doesn't match
      </mat-error>
      <mat-error *ngIf="(resetPasswordForm.controls['matchingPassword'].hasError('required') && resetPasswordForm.controls['matchingPassword'].touched)
          || (resetPasswordForm.controls['matchingPassword'].hasError('required') && resetPasswordForm.controls['matchingPassword'].dirty)">
        Matching password is <strong>required</strong>
      </mat-error>
      <p></p>
    </div>
  </div>
  <mat-hint style="font-size:12px">Legalább 8 karaktert használjon, és szerepeljenek köztük betűk, számok és
    szimbólumok is
  </mat-hint>
  <mat-checkbox
    formControlName="hide" (change)="hide = !hide">Show password
  </mat-checkbox>
  <div class="row">
    <div class="column">
      <button type="button" class="btn btn-primary btn-block" style="width: 120px" (click)="close()">Close</button>
    </div>
    <div class="column" style="text-align: right">
      <button type="submit" [disabled]="resetPasswordForm.pristine"
              class="btn btn-primary btn-block" style="width: 120px; float:right" (click)="onSubmit()">Sign in
      </button>
    </div>
    <input class="hideIt" #hideIt>
  </div>
  <br>
</form>
